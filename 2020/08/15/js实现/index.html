<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>js实现 | RICHARD</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="实现防抖函数(debounce)防抖函数原理： 在事件被触发n秒后再执行回调，如果再这n秒内又被触发，则重新计时。计时期间多次触发无效，并重置计时器。 使用场景：  按钮提交场景：防止多次提交按钮，只执行最后提交的一次。 服务端验证场景：表单验证需要服务端配合，只执行一段连续的输入事件的最后一次。类似于搜索功能。  生产环境使用lodash.debounce()手写简化版-1 123456789f">
<meta name="keywords" content="Python, JS, Vue, NodeJS">
<meta property="og:type" content="article">
<meta property="og:title" content="js实现">
<meta property="og:url" content="http://yoursite.com/2020/08/15/js实现/index.html">
<meta property="og:site_name" content="RICHARD">
<meta property="og:description" content="实现防抖函数(debounce)防抖函数原理： 在事件被触发n秒后再执行回调，如果再这n秒内又被触发，则重新计时。计时期间多次触发无效，并重置计时器。 使用场景：  按钮提交场景：防止多次提交按钮，只执行最后提交的一次。 服务端验证场景：表单验证需要服务端配合，只执行一段连续的输入事件的最后一次。类似于搜索功能。  生产环境使用lodash.debounce()手写简化版-1 123456789f">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-08-31T13:01:21.588Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="js实现">
<meta name="twitter:description" content="实现防抖函数(debounce)防抖函数原理： 在事件被触发n秒后再执行回调，如果再这n秒内又被触发，则重新计时。计时期间多次触发无效，并重置计时器。 使用场景：  按钮提交场景：防止多次提交按钮，只执行最后提交的一次。 服务端验证场景：表单验证需要服务端配合，只执行一段连续的输入事件的最后一次。类似于搜索功能。  生产环境使用lodash.debounce()手写简化版-1 123456789f">
  
    <link rel="alternate" href="/atom.xml" title="RICHARD" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">RICHARD</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">RICHARD BLOG</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-js实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/15/js实现/" class="article-date">
  <time datetime="2020-08-15T05:16:56.000Z" itemprop="datePublished">2020-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      js实现
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="实现防抖函数-debounce"><a href="#实现防抖函数-debounce" class="headerlink" title="实现防抖函数(debounce)"></a>实现防抖函数(debounce)</h1><p>防抖函数原理： 在事件被触发n秒后再执行回调，如果再这n秒内又被触发，则重新计时。计时期间多次触发无效，并重置计时器。</p>
<p>使用场景：</p>
<ol>
<li>按钮提交场景：防止多次提交按钮，只执行最后提交的一次。</li>
<li>服务端验证场景：表单验证需要服务端配合，只执行一段连续的输入事件的最后一次。类似于搜索功能。</li>
</ol>
<p>生产环境使用lodash.debounce()<br>手写简化版-1</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">            clearTimeout(timer)</span><br><span class="line">        &#125; </span><br><span class="line">        timer = setTimeout(fn, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实现节流函数-throttle"><a href="#实现节流函数-throttle" class="headerlink" title="实现节流函数(throttle)"></a>实现节流函数(throttle)</h1><p>计时期间内多次触发无效，到时间触发一次。<br>适用场景：</p>
<ol>
<li>拖拽场景： 固定时间内只执行一次，防止超高频次触发位置变动。</li>
<li>缩放场景：监控浏览器resize</li>
<li>动画场景： 避免短时间内多次触发动画引起性能问题。<br>手写简化版-1<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!flag) &#123;      <span class="comment">// 定时期间，操作无效，直接退出</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        flag = <span class="literal">false</span>      <span class="comment">// 开始进入定时内，将标志位设为false</span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">// 由定时器控制，到时间了就触发事件函数执行</span></span><br><span class="line">            fn()</span><br><span class="line">            flag = <span class="literal">true</span>   <span class="comment">// 重置标志位</span></span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>手写简化版-2</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> that = <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                timer = <span class="literal">null</span></span><br><span class="line">                fn.apply(that, args)</span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="JS-实现深拷贝和浅拷贝-deep-clone"><a href="#JS-实现深拷贝和浅拷贝-deep-clone" class="headerlink" title="JS 实现深拷贝和浅拷贝(deep clone)"></a>JS 实现深拷贝和浅拷贝(deep clone)</h1><p>深拷贝：开辟一个新的内存空间来保存对象，原来的对象改变不会影响新的对象。<br>浅拷贝：拷贝的是对象引用，原来的对象改变会影响新的对象。</p>
<h2 id="简单版"><a href="#简单版" class="headerlink" title="简单版"></a>简单版</h2><p>局限性：</p>
<ol>
<li>无法实现对函数，RegExp等特殊对象的克隆。</li>
<li>会抛弃对象的constructor，所有的构造函数都会指向Object。</li>
<li>对象有循环引用会报错</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newObj = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(oldObj))</span><br></pre></td></tr></table></figure>

<h2 id="面试版"><a href="#面试版" class="headerlink" title="面试版"></a>面试版</h2><p>局限性:</p>
<ol>
<li>对于一些特殊的情况没有处理：例如Buffer对象，Promise，Set，Map</li>
<li>另外对于确保没有循环引用的对象，我们可以省去对循环引用的特殊处理，因为这很耗时。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 判断输入数据类型，是否为对象</span></span><br><span class="line">    <span class="keyword">const</span> isType = <span class="function">(<span class="params">obj, type</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">"object"</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">const</span> typeString = <span class="built_in">Object</span>.prototype.toString.call(obj)</span><br><span class="line">        <span class="keyword">let</span> flag</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Array"</span>:</span><br><span class="line">                flag = typeString === <span class="string">"[object Array]"</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Date"</span>:</span><br><span class="line">                flag = typeString === <span class="string">"[object Date]"</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"RegExp"</span>:</span><br><span class="line">                flag = tyeString === <span class="string">"[object RegExp]"</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                flag = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理正则</span></span><br><span class="line">    <span class="keyword">const</span> getRegExp = <span class="function"><span class="params">re</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> flags = <span class="string">""</span></span><br><span class="line">        <span class="comment">// 是否有global</span></span><br><span class="line">        <span class="keyword">if</span> (re.global) flags += <span class="string">"g"</span></span><br><span class="line">        <span class="keyword">if</span> (re.ignoreCase) flags += <span class="string">"i"</span></span><br><span class="line">        <span class="keyword">if</span> (re.multiline) flags += <span class="string">"m"</span></span><br><span class="line">        <span class="keyword">return</span> flags</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 维护两个储存循环引用的数组</span></span><br><span class="line">    <span class="keyword">const</span> parents = []</span><br><span class="line">    <span class="keyword">const</span> children = []</span><br><span class="line">    <span class="keyword">const</span> clone = <span class="function"><span class="params">parent</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (parent === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> parent !== <span class="string">"object"</span>) <span class="keyword">return</span> parent</span><br><span class="line">        <span class="keyword">let</span> child, proto</span><br><span class="line">        <span class="keyword">if</span> (isType(parent, <span class="string">"Array"</span>)) &#123;</span><br><span class="line">            <span class="comment">// 传入的是数组  </span></span><br><span class="line">            child = []</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isType(parent, <span class="string">"RegExp"</span>)) &#123;</span><br><span class="line">            <span class="comment">// 传入的是RegExp</span></span><br><span class="line">            <span class="comment">// parent.source 就是 正则表达式的文本 字符串</span></span><br><span class="line">            <span class="comment">// getRegExp(parent) 返回匹配的模式的字符串， 'g' 'i' 'm'</span></span><br><span class="line">            <span class="comment">// 创建一个新的正则实例</span></span><br><span class="line">            child = <span class="keyword">new</span> <span class="built_in">RegExp</span>(parent.source, getRegExp(parent))</span><br><span class="line">            <span class="comment">// 正则对象lastIndex属性表示下一次匹配开始的位置</span></span><br><span class="line">            <span class="keyword">if</span> (parent.lastIndex) child.lastIndex = parent.lastIndex</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isType(parent, <span class="string">"Date"</span>)) &#123;</span><br><span class="line">            <span class="comment">// 传入的是Date对象</span></span><br><span class="line">            <span class="comment">// 通过getTime() 获取Date实例的时间字符串。</span></span><br><span class="line">            child = <span class="keyword">new</span> <span class="built_in">Date</span>(parent.getTime())</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 普通对象</span></span><br><span class="line">            <span class="comment">// getPrototypeOf()获取对象的原型</span></span><br><span class="line">            proto = <span class="built_in">Object</span>.getPrototypeOf(parent)</span><br><span class="line">            <span class="comment">// create(xx) 创建一个对象，该对象以传入的参数作为原型。</span></span><br><span class="line">            child = <span class="built_in">Object</span>.create(proto)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 处理循环引用</span></span><br><span class="line">        <span class="keyword">const</span> index = parents.indexOf(parent)</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果父数组存在本对象，说明之前已经被引用过，直接返回此对象</span></span><br><span class="line">            <span class="keyword">return</span> children[index] </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// parent 用来存传入的对象，可能被重复引用了。</span></span><br><span class="line">        parents.push(parent)</span><br><span class="line">        <span class="comment">// children用来存返回的新对象。</span></span><br><span class="line">        children.push(child)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> parent) &#123;</span><br><span class="line">            <span class="comment">// 递归</span></span><br><span class="line">            child[i] = clone(parent[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> child</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> clone(parent)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="实现Event-event-bus"><a href="#实现Event-event-bus" class="headerlink" title="实现Event(event bus)"></a>实现Event(event bus)</h1><p>Event bus 既是node中各个模块的基石，又是前端组件通信的依赖手段之一，同时涉及了订阅-发布模式，是非常重要的基础。</p>
<p>简单版：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">        <span class="keyword">this</span>._events = <span class="keyword">this</span>._events || <span class="keyword">new</span> <span class="built_in">Map</span>() <span class="comment">// 存储事件/回调键值对</span></span><br><span class="line">        <span class="keyword">this</span>._maxListeners = <span class="keyword">this</span>._maxListeners || <span class="number">10</span> <span class="comment">// 设置监听上限 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发名为type的事件</span></span><br><span class="line">EventEmitter.prototype.emit = <span class="function"><span class="keyword">function</span> (<span class="params">type, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> handler </span><br><span class="line">    handle = <span class="keyword">this</span>._enents.get(type) <span class="comment">// 获取事件函数</span></span><br><span class="line">    <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        handler.apply(<span class="keyword">this</span>, args)   <span class="comment">// 执行事件函数</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        handler.call(<span class="keyword">this</span>)          <span class="comment">// 执行事件函数</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听名为type的事件</span></span><br><span class="line">EvemtEmitter.prototype.addListener = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 将type事件以及对应的fn函数放入this._events存储</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>._events.get(type)) &#123;</span><br><span class="line">        <span class="keyword">this</span>._events.set(type, fn)  <span class="comment">// 设置监听名为type 和 事件函数fn 的map实例</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>面试版：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现Event bus - 面试版</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">        <span class="keyword">this</span>._events = <span class="keyword">this</span>._events || <span class="keyword">new</span> <span class="built_in">Map</span></span><br><span class="line">        <span class="keyword">this</span>._maxListeners = <span class="keyword">this</span>._maxListeners || <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">EventEmitter.prototype.emit = <span class="function"><span class="keyword">function</span> (<span class="params">type, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> handler</span><br><span class="line">    handler = <span class="keyword">this</span>._events.get(type)</span><br><span class="line">    <span class="comment">// 如果是一个数组说明有多个监听者，需要依次触发里面的函数</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(handler)) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; handler.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                handler[i].apply(<span class="keyword">this</span>, args)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                handler[i].call(<span class="keyword">this</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 单个函数的情况，直接触发</span></span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            handler.apply(<span class="keyword">this</span>, args)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            handler.call(<span class="keyword">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">EventEmitter.prototype.addListener = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取对应事件名称的函数list</span></span><br><span class="line">    <span class="keyword">const</span> handler = <span class="keyword">this</span>._events.get(type)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!handler) &#123;</span><br><span class="line">        <span class="comment">// 没有处理函数</span></span><br><span class="line">        <span class="keyword">this</span>._events.set(type, fn)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (handler &amp;&amp; <span class="keyword">typeof</span> handler === <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果handler是函数说明只有一个监听者, 用数组存储</span></span><br><span class="line">        <span class="keyword">this</span>._events.set(type, [handler, fn]) </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        handler.push(fn)  <span class="comment">// 多个监听者，存储到数组</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">EventEmitter.prototype.removeListener = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> handler = <span class="keyword">this</span>._events.get(type)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是函数，只被监听了一次</span></span><br><span class="line">    <span class="keyword">if</span> (handler &amp;&amp; <span class="keyword">typeof</span> handler == <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._events.delete(type, fn)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// handler 是数组，找到对应的fn删掉</span></span><br><span class="line">        <span class="keyword">let</span> postion</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; handler.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (handler[i] === fn) &#123;</span><br><span class="line">                postion = i</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                postion = <span class="number">-1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (postion !== <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// 在数组中删除fn</span></span><br><span class="line">            handler.splice(postion, <span class="number">1</span>)</span><br><span class="line">            <span class="comment">// 如果handler数组中只有一个函数，取消数组，使用函数形式保存</span></span><br><span class="line">            <span class="keyword">if</span> (handler.length === <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>._events.set(type, handler[<span class="number">0</span>])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实现instanceOf"><a href="#实现instanceOf" class="headerlink" title="实现instanceOf"></a>实现instanceOf</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟instanceOf</span></span><br><span class="line"><span class="comment">//  L instanceOf R</span></span><br><span class="line"><span class="comment">// L 表示左表达式，P表示右表达式</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instance_of</span>(<span class="params">L, R</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取R的原型</span></span><br><span class="line">    <span class="keyword">let</span> o = R.prototype</span><br><span class="line">    <span class="comment">// 获取L的原型</span></span><br><span class="line">    L = L.__proto__</span><br><span class="line">    <span class="comment">// 一直迭代判断两者的原型是否完全相等</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (L === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> (o === L) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment">// 向上寻找L的原型</span></span><br><span class="line">        L = L.__proto__</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="模拟new"><a href="#模拟new" class="headerlink" title="模拟new"></a>模拟new</h1><p>new 操作符做了这些事：</p>
<ol>
<li>创建了一个全新的空对象。</li>
<li>获取构造函数。</li>
<li>设置空对象的原型。</li>
<li>执行构造函数，绑定this。</li>
<li>确保返回值为对象。</li>
</ol>
<p>实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// objectFactory(className, arg1, arg2)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objectFactory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 创建一个空对象</span></span><br><span class="line">    <span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">    <span class="comment">// 获取构造函数</span></span><br><span class="line">    <span class="keyword">const</span> Consturctor = [].shift.call(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="comment">// 获取构造函数的原型，并赋给空对象</span></span><br><span class="line">    obj.__proto__ = Constructor.prototype</span><br><span class="line">    <span class="comment">// 绑定this：使用apply，将构造函数中的this指向新对象，这样新对象就可以访问构造函数中的属性和方法</span></span><br><span class="line">    <span class="keyword">const</span> ret = Constructor.apply(obj, argument)</span><br><span class="line">    <span class="comment">//如果返回值是一个对象就返回该对象，否则返回构造函数的一个实例对象</span></span><br><span class="line">    <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age =age</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = objectFactory(People, <span class="string">'coke'</span>, <span class="string">'18'</span>)</span><br></pre></td></tr></table></figure>

<h1 id="实现一个call"><a href="#实现一个call" class="headerlink" title="实现一个call"></a>实现一个call</h1><p>分析call做了什么：</p>
<ol>
<li>首先context为可选参数，如果不传的话默认上下文为window</li>
<li>给context创建一个fn属性，并将值设置为需要调用的函数。</li>
<li>因为call可以传入多个参数作为调用函数的参数，所以需要将参数剥离出来。</li>
<li>然后调用函数并将对象上的fn属性删除。<br>实现call<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟call</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Type Error'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 传入的上下文为null的时候，采用window</span></span><br><span class="line">    <span class="keyword">let</span> context = context || <span class="built_in">window</span></span><br><span class="line">    <span class="comment">// 此处没有考虑context非object情况</span></span><br><span class="line">    <span class="comment">// this就是当前函数，把当前函数作为属性绑定给上下文对象，再删除该属性</span></span><br><span class="line">    context.fn = <span class="keyword">this</span></span><br><span class="line">    <span class="comment">// 处理参数</span></span><br><span class="line">    <span class="keyword">let</span> args = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>,len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</span><br><span class="line">        args.push(<span class="built_in">arguments</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> result = context.fn(...args)</span><br><span class="line">    <span class="comment">// 删除属性</span></span><br><span class="line">    <span class="keyword">delete</span> context.fn</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="实现一个apply"><a href="#实现一个apply" class="headerlink" title="实现一个apply"></a>实现一个apply</h1><p>apply原理与call类似, 注意参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> context !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'type error'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    context  = context || <span class="built_in">window</span></span><br><span class="line">    context.fn = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">let</span> result</span><br><span class="line">    <span class="comment">// apply 与call 方法，参数不同</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">        result = context.fn(...arguments[<span class="number">1</span>])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = context.fn()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> context.fn</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实现bind"><a href="#实现bind" class="headerlink" title="实现bind"></a>实现bind</h1><ol>
<li>bind会返回一个函数。</li>
<li>对于参数需要拼接函数调用的时候传入的参数。</li>
<li>返回的函数可以通过new的方式调用。作为构造函数使用的时候，要让this失效，但是传入的参数依然有效。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现bind</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>; <span class="comment">// this就是原函数</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>); <span class="comment">// 获取参数数组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> fBound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>); <span class="comment">// 获取参数数组</span></span><br><span class="line">        <span class="comment">// 当返回的这个函数以new形式调用，则this 是FNOP的实例，则给原函数绑定为this实例，否则以context为this的指向</span></span><br><span class="line">        <span class="comment">// 参数合并</span></span><br><span class="line">        <span class="keyword">return</span> self.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="keyword">this</span> : context, args.concat(bindArgs));</span><br><span class="line">    &#125;</span><br><span class="line">    fNOP.prototype = <span class="keyword">this</span>.prototype; <span class="comment">// 改变FNOP原型，原型指向原函数的原型</span></span><br><span class="line">    fBound.prototype = <span class="keyword">new</span> fNOP();   <span class="comment">// 改变FBound原型，使用FNOP做中转</span></span><br><span class="line">    <span class="keyword">return</span> fBound;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="实现Object-create"><a href="#实现Object-create" class="headerlink" title="实现Object.create()"></a>实现Object.create()</h1><p>Object.create方法创建一个新对象，使用现有的对象来提供新创建的对象的<strong>proto</strong>属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    F.prototype = proto</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实现类的继承"><a href="#实现类的继承" class="headerlink" title="实现类的继承"></a>实现类的继承</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.parent = name</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'haha'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name, parent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 绑定父类的构造函数到子类上</span></span><br><span class="line">    Parent.call(<span class="keyword">this</span>, parent)</span><br><span class="line">    <span class="keyword">this</span>.child = name</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.parent&#125;</span> and <span class="subst">$&#123;<span class="keyword">this</span>.child&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取父类的原型</span></span><br><span class="line">Child.prototype = <span class="built_in">Object</span>.create(Parent.prototype)</span><br><span class="line"><span class="comment">// 原型的构造函数属性指向子类自己</span></span><br><span class="line">Child.prototype.constructor = Child</span><br><span class="line"><span class="keyword">const</span> parent = <span class="keyword">new</span> Parent(<span class="string">'father'</span>)</span><br><span class="line">parent.say()</span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> Child(<span class="string">'coke'</span>, <span class="string">'father'</span>) </span><br><span class="line">child.say</span><br></pre></td></tr></table></figure>

<p>ES6语法实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Class Animal &#123;</span><br><span class="line"> <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">     <span class="keyword">this</span>.name = name</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">Class cat extends Animal&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name)</span><br><span class="line">        <span class="keyword">this</span>.color = <span class="string">'black'</span> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实现JSON-parse"><a href="#实现JSON-parse" class="headerlink" title="实现JSON.parse"></a>实现JSON.parse</h1><h1 id="实现Promsise"><a href="#实现Promsise" class="headerlink" title="实现Promsise"></a>实现Promsise</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/15/js实现/" data-id="ckh44mztz00104sv2zodgq8gg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/08/31/工作笔记/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          工作笔记
        
      </div>
    </a>
  
  
    <a href="/2020/08/13/webpack4/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">webpack4</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/How-to-use-hexo-create-a-blog/">How to use hexo create a blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas-基础/">canvas 基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 20px;">CSS</a> <a href="/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/tags/How-to-use-hexo-create-a-blog/" style="font-size: 10px;">How to use hexo create a blog</a> <a href="/tags/canvas-基础/" style="font-size: 10px;">canvas 基础</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/10/09/DOM/">DOM</a>
          </li>
        
          <li>
            <a href="/2020/10/09/CSS总结/">CSS总结</a>
          </li>
        
          <li>
            <a href="/2020/10/09/canvas基础/">canvas</a>
          </li>
        
          <li>
            <a href="/2020/10/09/设计模式/">设计模式</a>
          </li>
        
          <li>
            <a href="/2020/10/09/重识CSS/">重识CSS</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Richard.Zhao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>