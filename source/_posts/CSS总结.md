---
title: CSS总结
date: 2020-10-09 18:15:25
tags: CSS
---

# CSS 总结

# 前言

这章内容的目的是 1.总结 CSS 知识点，分析 CSS 原理，形成自己的 CSS 知识体系。2.学习并记录常见的 CSS 特效的实现，以及常见 CSS 问题出现的原因。

# HTML，CSS， JS

HTML，CSS 层叠样式表和 JavaScript 一起称为前端三大件。HTML 用来搭建网页的结构，提供了 CSS 要作用的元素。CSS 用来修改元素的外观表现，以及布局位置。HTML 关注于内容，CSS 关注于表现。两者结合就能创造出我们想要的网页效果。JS 则用于页面交互，DOM 可以操作 HTML 元素节点，更改元素的样式属性，触发事件，更加丰富了页面。

# 理解 CSS

CSS 要发挥作用，首先必须要有一个着力点，也就是样式要应用到哪个元素上，或者哪些元素上，因此必须有选择器，选择器提供了 CSS 的作用对象。然后就是写 CSS 的规则，每个属性的设置都有自己规则。然后根据 CSS 想要实现的特效，将 CSS 知识体系分类为布局设置，字体设置，背景图像设置，元素变换设置（缩放，移动，转动），动画设置。根据 CSS 的发展又可以将其分为 table 相关属性设置，CSS3 之前的属性和 CSS3 的新特性。table 的属性设置和 CSS 属性不同，不属于同一个世界。

虽然人为的将 CSS 属性设置进行分类，并不代表每一块的属性作用是独立的，相反在 CSS 中，各种属性是相互影响的，为实现某一特效，经常会多个属性配合使用。

## CSS 选择器

CSS 选择器分为基础选择器，组合选择器，伪类选择器，伪元素选择器。

### 基础选择器

1. 元素选择器 (span, div)
2. 类选择器 (.className)
3. ID 选择器
4. \*选择器
5. 属性选择器

### 组合选择器

1. 后代选择器 (A B)
2. 直接子代选择器 (A > B)
3. 兄弟选择器(A ~ B)
4. 直接兄弟选择器(A + B)
5. 组选择器(A, B)

### 伪类选择器

对于伪类，可以理解为当元素处于什么状态的时候，会有什么样的表现。

```css
a:link {
  color: blue;
} /* 未访问链接 */
a:visited {
  color: purple;
} /* 已访问链接 */
a:hover {
  background: yellow;
} /* 用户鼠标悬停 */
a:active {
  color: red;
} /* 激活链接 */
```

### 伪元素选择器

对于伪元素，可以理解为指定元素的指定位置增加新的内容。

```css
/* 在a标签之后增加一个箭头 */
a::after {
  content: "→";
}
/* 在a标签之前增加一个+号 */
a::before {
  content: "+" ；;
}
```

## CSS 布局

理解 CSS 布局首先要了解内联元素，块级元素，可替换元素，包含块和盒模型的概念。它们决定了元素的尺寸和位置。然后了解布局相关的定位和浮动，它们可以让元素移动到你要想的位置。

### 元素

HTML 标签通常被分为块级元素和内联元素，还有可替换元素。

#### 块级元素

块级元素的基本特征: 在一个水平流上只能单独显示一个元素，多个块级元素则换行显示。块级占据容器的宽度，宽高可以自定义。常见块级元素: div，p，ul，ol，li，table。
注意: 块级元素和 display 为 block 的元素不是一个概念。

#### 内联元素

内联元素的基本特征: 在一个水平流上能显示多个元素内联元素，内联元素的宽高由内容决定，不能自定义。常见内联元素:span, strong。

#### 可替换元素

可替换元素指元素内容可以被替换的元素，并且样式由替换的内容决定。
常见的可替换元素: iframe, video, embed, img, textarea。
特殊的可替换元素: type 为 image 的 input 元素，其他类型的 input 均为非可替换元素。
匿名可替换元素: 用 content 属性插入的对象是匿名的可替换元素，它们并不存在于 HTML 标记中，因此是“匿名的”。

替换元素的特性

1. 替换元素内容的外观不受页面上的 CSS 的影响。更改替换元素本身的外观需要类似 appearance 属性，或者浏览器自身暴露的一些样式接口。
2. 有自己的尺寸。在 Web 中，很多替换元素在没有明确尺寸设定的情况下，其默认的尺寸（不包括边框）是300 像素 ×150像素，如video、iframe或者canvas等，也有少部分替换元素为 0 像素，如 img 图片，而表单元素的替换元素的尺寸则和浏览器有关，没有明显的规律。
3. 在很多 CSS 属性上有自己的一套表现规则。比较具有代表性的就是 vertical-align 属性，对于替换元素和非替换元素，vertical-align 属性值的解释是不一样的。比方说 vertical-align 的默认值的 baseline，很简单的属性值，基线之意， 被定义为字符 x 的下边缘，而替换元素的基线却被硬生生定义成了元素的下边缘。
4. 所有的替换元素都是内联水平元素，也就是替换元素和替换元素、替换元素和文字都是可以在一行显示的。但是，替换元素默认的display值却是不一样的，有的是inline，有的是inline-block。

### 盒模型

盒模型是 CSS 的基石，它决定了元素在页面中的尺寸，如何表现。页面中的每个元素都会以一个矩形框表示，这个框由元素的内容，内边距，边框和外边距组成。

#### 盒模型分类

在 CSS 中，W3C 标准盒模型的 width 和 height 是内容区域的宽和高，任何边框和内边距的宽度都会被增加到最后绘制出来的元素宽度中。而在非标准的 IE 盒模型中，width 和 height 是内容，内边距和边框的总和。在 CSS3 中，可以使用 box-sizing 属性定义要使用哪种盒模型。

1. content-box,默认值，width 和 height 设置为内容区域的宽高，最后的元素宽度高度表现为内容区域的宽高，内边距和边框的总和。
2. border-box，width 和 height 为内容区域，内边距和边框之和。内容区域的宽度为 width-边框-内边距，最后的元素宽度高度就表现为设置的 width 和 height。

border-box 不包括 margin，border-box 常被用于响应式布局。

```CSS
div {
  box-sizing: content-box;
}
```

#### 盒模型内容构成

1. 内容区域(content area)。
2. 内边距(padding)。
3. 边框(border)。
4. 外边距(margin)。

#### 外在盒子和内在盒子

每个元素实际上都有两个盒子，外在盒子和内在盒子。外在盒子决定元素是一行显示，还是换行显示。内在盒子决定宽高，内容呈现，内在盒子也叫容器盒子。
按照 display 的属性值不同，值为 block 的元素的盒子实际上是由外在的块级盒子和内在的块级容器盒子组成。值为 inline 的元素则内外均是内联盒子。值为 inline-block 的元素则由外在的内联盒子和内在的块级容器盒子组成，因此 display 值为 inline-block 的元素既能和图文一行显示，也能设置 width/height。width 和 height 作用在内在盒子上，也就是容器盒子。

##### width/height 作用细节

width 的默认值是 auto, 它有以下四种特性：

1. 充分利用可用空间: 例如 div 和 p 元素的宽度默认是 100%容器的宽度。
2. 收缩与包裹: 也称为包裹性, 宽度会收缩到元素合适的宽度。浮动, 绝对定位, inline-block 元素和 table 元素都具有这种特性。
3. 收缩到最小: 也称为最小宽度,元素空间不够容纳文字时, 文字就会断裂,出现一柱擎天的效果。
4. 不会超出父容器的宽度: 除了 width 相关设置，如 white-space: nowrap, 或者是一段连续的英文和数字文本，就会超过父容器的宽度。

#### 包含块

包含块概念就是元素用来计算自己尺寸和自己定位一个参考矩形框。一个元素的尺寸和位置经常受到包含块的影响。在大多数情况下包含块就是这个元素最近的父级块元素的内容区域。

##### 根元素

初始包含块，html 标签，其宽高是浏览器的可视窗口的大小，不包含浏览器的标签栏和工具栏。

##### 其他元素的包含块

如果元素的 position 是 relative 或者 static，则包含块由其最近的父级块级容器的 contentbox 边界形成。
如果元素的 position 是 fixed，则包含块为初始包含块，则为 html 标签的边界形成。
如果元素的 position 是 absolute，则包含块由最近的不为 static 的父级元素决定。如果父级元素为 inline 元素，规则复杂。
### 标准文档流
首先理解文档流，浏览器解析html元素，按照从上到下，一行行渲染元素，行内则从左到右一个一个元素去渲染。标准文档流有以下特性：
1. 空白折叠现象：无论多少个空格，换行，tab都会折叠为一个空格。如图片之间没有空隙，则img标签必须紧密连接，不能换行。
2. 高矮不齐，底边对齐。
3. 自动换行，一行写不满，换行写。
4. 脱离文档流的三种方式：浮动(float),绝对定位(position:absolute), 固定定位(position:fixed)。
### 定位position属性
absolute ，fixed会使得元素脱离正常的文档流，从而导致元素移动。
position属性有以下值
1. static 默认值。元素出现在文档流中，此时top,bottom,left,right,z-index声明无效。
2. relative 相对定位，相对元素自身在文档流中原本的位置进行定位。
3. absolute 绝对定位，相对自己最近的position设置为 absolute 或者 relative 的父元素的 paddingbox 的左上角为原点定位。
4. fixed 固定定位，相对于浏览器窗口进行定位。
5. inherit 从父元素继承 position 属性的值。
### 浮动float属性
改变文档流的另一种方式，使用浮动float。

#### 浮动元素如何定位
当一个元素浮动之后，它会被移出正常的文档流，然后向左或者向右平移，一直平移直到碰到了所处的容器的边框，或者碰到另外一个浮动的元素。

#### 浮动的特性
1. 浮动的元素会脱离标准文档流，浮动意味着使用块布局，浮动之后会修改元素的display的计算值，大部分情况为block，因此浮动的元素都能设置宽高，float对display：flex没有作用。
2. 设置了浮动的元素相互紧贴。
3. 标准流中的文字不会被浮动的元素遮挡住，会形成文字环绕的效果，这也是浮动最初的目的。
4. 收缩性(包裹性)：浮动的元素没有设置width，那么宽度自动收缩为内容的宽度。

#### 浮动的属性值
1. left: 元素浮动在其所在块容器的左侧。
2. right: 元素浮动在其所在块容器的右侧。
3. none: 元素不进行浮动。
4. inline-start: 元素浮动在其所在块容器的开始一侧。
5. inline-end: 元素浮动在其所在容器的结束一侧。 

#### 清除浮动
清除浮动指的是清除浮动元素对外部的影响。浮动的元素，高度会塌陷，而高度的塌陷使我们页面后面的布局不能正常显示。
清除浮动的几种方式：
1. 给浮动的元素的父级容器高度，并且高度要大于子元素的高度。因为只要浮动在一个有高度的盒子中，那么这个浮动就不会影响后面的浮动元素，所以就清除浮动带来的影响了。（有高度的盒子才能关住浮动）。
2. cleat:both 元素被向下移动用于清除之前的左右浮动，即不和浮动元素相邻接。
3. 一般使用伪元素的方式清除浮动，因为clear属性只有块级元素才有效，而::after等伪元素默认都是内联元素，因此借助伪元素清除浮动影响时，需要设置display：block。
```css
.clear::after {
  content: '';
  display: table; // 'block' 或 'list-item'
  clear:both;
}
```
4. overflow:hidden;能达到清除浮动的作用。原理是没有明确容器高度的情况下，要计算内容的全部高度才能确定在什么位置hidden,浮动的高度被计算进去，就顺带达成了清除浮动的目标。这种方式常用于父级容器高度没有设置的情况下，清除其内部子元素浮动的影响。
