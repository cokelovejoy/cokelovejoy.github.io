# React 原理
## 性能瓶颈分析
CPU瓶颈：大量计算，渲染视图
IO瓶颈：异步请求耗时
## 浏览器渲染机制
主流浏览器刷新频率为60Hz，即每（1000ms / 60Hz）16.6ms浏览器刷新一次。JS可以操作DOM，GUI渲染线程与JS线程是互斥的。JS脚本执行和浏览器布局、绘制不能同时执行。

每一帧的时间内，浏览器会去执行js脚本，样式布局，样式绘制。

React利用浏览器在每一帧预留给js线程的时间去更新组件。将长任务拆分到每一帧中，每一次执行一小段任务，这样浏览器就有剩余时间执行样式布局和样式绘制，减少掉帧的可能性。这种方式也叫时间切片。

## CPU瓶颈解决
解决CPU瓶颈的关键是实现时间切片，而时间切片的关键是：将同步的更新变为可中断的异步更新。

## IO瓶颈解决
减少网络请求带来的延迟感，先在当前页面停留了一小段时间，这一小段时间被用来请求数据。当“这一小段时间”足够短时，用户是无感知的。如果请求时间超过一个范围，再显示loading的效果。

React为了支持这些特性，同样需要将同步的更新变为可中断的异步更新。

## 老的React架构
## 新的React架构
### Scheduler(调度器)
### Reconciler(协调器)
### Renderer(渲染器)